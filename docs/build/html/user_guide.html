
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Guide &#8212; VT-S3FNet 1.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced Examples" href="advanced_examples.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="advanced_examples.html" title="Advanced Examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">VT-S3FNet 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">User Guide</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">Â¶</a></h1>
<p>This section describes how to specify co-simulated models using the
Domain Modelling Language (DML). The reader is assumed to have some
familiarity with S3FNet specific DML constructs described
<a class="reference external" href="https://s3f.iti.illinois.edu/usrman/s3fnet.html#dml">here</a>.</p>
<p>Throughout this section, we will use a running example defined
<a class="reference external" href="https://github.com/Vignesh2208/VT-S3FNet/tree/master/base/s3fnet/test/lxc_tests/small_2_tcp_large_pings/test.dml/">here</a>.</p>
<p>This is copied below for convenience:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">total_timeline</span> <span class="mi">5</span>
<span class="n">tick_per_second</span> <span class="mi">6</span>
<span class="n">run_time</span> <span class="mi">5</span>
<span class="n">seed</span> <span class="mi">1</span>
<span class="n">log_dir</span> <span class="s2">&quot;4_LXC_Small_TCP&quot;</span>
<span class="n">virtual_time_manager</span> <span class="s2">&quot;TITAN&quot;</span>
<span class="n">eat_update_period_us</span> <span class="mi">1000</span>
<span class="n">enable_lookahead</span> <span class="mi">1</span>

<span class="c1"># ------------- CO-SIMULATION TOPOLOGY ------------------#</span>
<span class="c1">#     client                                  server     #</span>
<span class="c1">#       1us\  1us links                      /1us        #</span>
<span class="c1">#           r0--r1--r2--r3--r4--r5--r6--r7--r8           #</span>
<span class="c1">#       1us/                                 \1us        #</span>
<span class="c1">#     client                                  server     #</span>
<span class="c1">#--------------------------------------------------------#</span>


<span class="n">Net</span>
<span class="p">[</span>
    <span class="n">lxcConfig</span>
    <span class="p">[</span>
        <span class="c1"># Poisson bursty flows between client server pairs</span>
        <span class="n">settings</span> <span class="p">[</span> <span class="n">lxcNHI</span> <span class="mi">0</span><span class="p">:</span><span class="mi">0</span> <span class="n">ttnProject</span> <span class="s2">&quot;tcp_tgen&quot;</span> <span class="n">dependants</span> <span class="s2">&quot;1&quot;</span> <span class="n">cmd</span> <span class="s2">&quot;/home/titan/VT-S3FNet/csudp/tcp_tgen/tgen client 1:0 7891 poisson 100000 &gt; /tmp/client1.log&quot;</span>  <span class="p">]</span>
        <span class="n">settings</span> <span class="p">[</span> <span class="n">lxcNHI</span> <span class="mi">1</span><span class="p">:</span><span class="mi">0</span> <span class="n">ttnProject</span> <span class="s2">&quot;tcp_tgen&quot;</span> <span class="n">dependants</span> <span class="s2">&quot;0&quot;</span> <span class="n">cmd</span> <span class="s2">&quot;/home/titan/VT-S3FNet/csudp/tcp_tgen/tgen server 1:0 7891 &gt; /tmp/server1.log&quot;</span>  <span class="p">]</span>
        <span class="n">settings</span> <span class="p">[</span> <span class="n">lxcNHI</span> <span class="mi">2</span><span class="p">:</span><span class="mi">0</span> <span class="n">ttnProject</span> <span class="s2">&quot;tcp_tgen&quot;</span> <span class="n">dependants</span> <span class="s2">&quot;3&quot;</span> <span class="n">cmd</span> <span class="s2">&quot;/home/titan/VT-S3FNet/csudp/tcp_tgen/tgen client 3:0 7891 poisson 100000 &gt; /tmp/client2.log&quot;</span>  <span class="p">]</span>
        <span class="n">settings</span> <span class="p">[</span> <span class="n">lxcNHI</span> <span class="mi">3</span><span class="p">:</span><span class="mi">0</span> <span class="n">ttnProject</span> <span class="s2">&quot;tcp_tgen&quot;</span> <span class="n">dependants</span> <span class="s2">&quot;2&quot;</span> <span class="n">cmd</span> <span class="s2">&quot;/home/titan/VT-S3FNet/csudp/tcp_tgen/tgen server 3:0 7891 &gt; /tmp/server2.log&quot;</span>  <span class="p">]</span>

    <span class="p">]</span>

    <span class="n">Net</span>
    <span class="p">[</span>
        <span class="nb">id</span> <span class="mi">0</span>
        <span class="n">alignment</span> <span class="mi">0</span>
        <span class="n">host</span>                                                                                                                                        <span class="c1"># Host 0:0</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">0</span>
            <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">emuHost</span>
        <span class="p">]</span>
    <span class="p">]</span>
    <span class="n">Net</span>
    <span class="p">[</span>
        <span class="nb">id</span> <span class="mi">1</span>
        <span class="n">alignment</span> <span class="mi">1</span>
        <span class="n">host</span>                                                                                                                                        <span class="c1"># Host 1:0</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">0</span>
            <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">emuHost</span>
        <span class="p">]</span>
    <span class="p">]</span>
    <span class="n">Net</span>
    <span class="p">[</span>
        <span class="nb">id</span> <span class="mi">2</span>
        <span class="n">alignment</span> <span class="mi">2</span>
        <span class="n">host</span>                                                                                                                                        <span class="c1"># Host 0:0</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">0</span>
            <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">emuHost</span>
        <span class="p">]</span>
    <span class="p">]</span>
    <span class="n">Net</span>
    <span class="p">[</span>
        <span class="nb">id</span> <span class="mi">3</span>
        <span class="n">alignment</span> <span class="mi">3</span>
        <span class="n">host</span>                                                                                                                                        <span class="c1"># Host 1:0</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">0</span>
            <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">emuHost</span>
        <span class="p">]</span>
    <span class="p">]</span>
    <span class="n">Net</span>
    <span class="p">[</span>
        <span class="nb">id</span> <span class="mi">4</span>
        <span class="n">alignment</span> <span class="mi">4</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">0</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">2</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">1</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">2</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">3</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">4</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">5</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">6</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">7</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="n">router</span>                                                                                                                                      <span class="c1"># Router 1:2</span>
        <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">8</span>
            <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">2</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">]</span>

    <span class="c1"># Host to router links</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">2</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">3</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>

    <span class="c1"># Router - router links</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">1</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">1</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">2</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">3</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">3</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">4</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">4</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">5</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">5</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">7</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
    <span class="n">link</span> <span class="p">[</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">7</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">link_delay_1us</span> <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This file defines a simple co-simulation consisting of 4 emulated hosts (LXCs)
interacting with each other over a simulated network consisting of 8 routers.</p>
<p>A detailed tutorial on how to define S3FNet simulation models using
DML is available <a class="reference external" href="http://www.ssfnet.org/InternetDocs/ssfnetTutorial-1.html">here</a>.</p>
<p>In this section, we only describe additional fields specifically added to the DML language to
support <strong>co-simulation</strong>. These fields are described below:</p>
<ul>
<li><p><strong>total_timeline</strong>. Total number of timelines in the co-simulation. The running example contains 5
timelines.</p></li>
<li><p><strong>tick_per_second</strong>. Number of ticks in one second. This controls the time resolution. Setting it
to a value 6 represents 10^6 ticks in one second. Thus each tick represents 1us. Currently the highest
resolution supported in a co-simulation is 1us.</p></li>
<li><p><strong>log_dir</strong>. Specifies a directory which is created inside ~/VT-S3FNet/experiment-data. Any experiment
logs are stored here.</p></li>
<li><p><strong>run_time</strong>. Total virtual run time of the co-simulation in seconds.</p></li>
<li><p><strong>virtual_time_manager</strong>. This field can take the value either âTITANâ or âKRONOSâ. Note that
VT-3FNet must have been installed for the chosen virtual time manager. In the running example
Titan is chosen as the virtual time manager.</p></li>
<li><p><strong>eat_update_period_us</strong>. This field is relevant only when Titan is the chosen virtual time
manager. It controls the earliest arrival time update frequency. This is only relevant when
lookaheads are enabled. In the running example, this is set to 1ms.</p></li>
<li><p><strong>enable_lookahead</strong>. This field is relevant only when Titan is chosen as the virtual time
manager. If set to 1, then lookahead based synchronization would be used. If set to 0, lookaheads
would be ignored.</p></li>
<li><p><strong>lxcConfig</strong>. This field groups settings for all emulated hosts/LXCs in the co-simulation.
Each emulated host is configured with a separate <strong>settings</strong> attribute as illustrated in the
running example.</p></li>
<li><p><strong>lxcNHI</strong>. This field identifies the specific LXC in question. It is folowed by two numbers separated
by a colon (e.g 0:0). These numbers should be interpreted as network-id:host-id i.e they refer to
a specific network and a specific host aligned on the network. Thus 0:0 refers to host with id 0 aligned
on a network with id 0.</p></li>
<li><p><strong>ttnProject</strong>. This field specifies the titan project associated with code that needs to be emulated on
the lxc in question. For information on titan projects, refer this <a class="reference external" href="https://titan-vt.readthedocs.io/en/latest/compilation.html">link</a>.
It may be left un-specified if the virtual time manager used is Kronos.</p>
<p>In the running example, a project with the name âtcp_tgenâ is assumed to exist before running this co-simulation.
It is also assumed that the binary ~/VT-S3FNet/csudp/tcp_tgen/tgen has been compiled with under this titan project.</p>
</li>
<li><p><strong>dependants</strong>. This field specifies a comma separated list of timelines which may influence/affect the LXC in
question. For instance, in the running example, lxc 0:0 can be influenced by any emulated host aligned on timeline 1 and
lxc 1:0 can be influenced by any emulated host aligned on timeline 0.</p>
<p>If left un-specified, then an lxc is assumed to depend on all timelines hosting other lxcs.
Multiple dependants may be specified as a comma separated string (e.g â1,2,3,4â).
This field is ignored if the virtual time manager is Kronos.</p>
</li>
<li><p><strong>cmd</strong>. This field specifies the command to emulate on the host/lxc in question.</p></li>
</ul>
<div class="section" id="emulated-host-definitions">
<h2>Emulated host definitions<a class="headerlink" href="#emulated-host-definitions" title="Permalink to this headline">Â¶</a></h2>
<p>The previous section described how to specify commands to be co-simulated. The next crucial step involves
attaching a proxy for each emulated host in the simulated network. This is done by adding definitions
of each emulated host.</p>
<p>An example is given below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Net</span>
<span class="p">[</span>
        <span class="nb">id</span> <span class="mi">0</span>          <span class="c1"># Network-id</span>
        <span class="n">alignment</span> <span class="mi">0</span>   <span class="c1"># Timeline on which this network and all its hosts are aligned</span>
        <span class="n">host</span>                                                                                                                                    <span class="c1"># Host 0:0</span>
        <span class="p">[</span>
                <span class="nb">id</span> <span class="mi">0</span>      <span class="c1"># host 0 of this network.</span>
                <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">emuHost</span>  <span class="c1"># emuHost indicates that this host is emulated.</span>
        <span class="p">]</span>

<span class="c1"># Note that more host definitions may be added here. But they must all be emulated as well.</span>
<span class="c1"># If one host aligned on a network is emulated, then all other hosts aligned on the network</span>
<span class="c1"># must also be emulated.</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This example adds an emulated host on a network with id-0. The emulated hostâs id is also 0.
This host is aligned to timeline 0 (since aligment is 0). This proxy definition corresponds to lxcNHI 0:0
and its configuration.</p>
<p>Similarly the example below corresponds to lxcNHI 1:0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Net</span>
<span class="p">[</span>
        <span class="nb">id</span> <span class="mi">1</span>
        <span class="n">alignment</span> <span class="mi">1</span>
        <span class="n">host</span>                                                                                                                                    <span class="c1"># Host 1:0</span>
        <span class="p">[</span>
                <span class="nb">id</span> <span class="mi">0</span>
                <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">emuHost</span>
        <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <strong>emuHost</strong> definition can be found <a class="reference external" href="https://github.com/Vignesh2208/VT-S3FNet/tree/master/base/s3fnet/test/lxc_tests/aux/mydictionary.dml/">here</a>.
This is expected to be common among all emulated hosts. It defines the ProtocolSession to be used for emulated hosts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current implementation requires all hosts aligned on a timeline to be exclusively emulated or simulated i.e, they cannot be a mix of both. Futher, the lookahead algorithm currently only supports alignment of simulated hosts to one timeline.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the running example, lxcs 0:0, 1:0, 2:0 and 3:0 are aligned on timelines 0, 1, 2 and 3 respectively. These timelines only host emulated entities.</p>
</div>
</div>
<div class="section" id="defining-a-simulated-network">
<h2>Defining a simulated network<a class="headerlink" href="#defining-a-simulated-network" title="Permalink to this headline">Â¶</a></h2>
<p>Simulated networks may be created as described in the S3FNet and SSFNet tutorials.</p>
<ul class="simple">
<li><p>A key restriction is that all simulated network-ids must be aligned to the same timeline.</p></li>
<li><p>No emulated host must be aligned to this timeline</p></li>
</ul>
<p>In the running example, the simulated network is defined separately and aligned onto one timeline:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Net</span>
    <span class="p">[</span>
            <span class="nb">id</span> <span class="mi">4</span>           <span class="c1"># Network id 4 contains only simulated routers.</span>
            <span class="n">alignment</span> <span class="mi">4</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">0</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">2</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">1</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">2</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">3</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">4</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">5</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">6</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">7</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="n">router</span>                                                                                                                                  <span class="c1"># Router 1:2</span>
            <span class="p">[</span>
                    <span class="nb">id</span> <span class="mi">8</span>
                    <span class="n">_find</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="n">routerGraph</span><span class="o">.</span><span class="n">graph</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">0</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">1</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
                    <span class="n">interface</span> <span class="p">[</span><span class="nb">id</span> <span class="mi">2</span> <span class="n">_extends</span> <span class="o">.</span><span class="n">dict</span><span class="o">.</span><span class="mi">1</span><span class="n">Gb</span><span class="p">]</span>
            <span class="p">]</span>
    <span class="p">]</span>
</pre></div>
</div>
<p>This defines a simulated network containing 8 routers. This network
is aligned on timeline 4.</p>
<p>The running example also defines links interconnecting all the emulated
and simulated entities in the co-simulation. This is based on the S3FNet
DML specification and is explained futher in the linked tutorials.</p>
</div>
<div class="section" id="running-the-co-simulation">
<h2>Running the co-simulation<a class="headerlink" href="#running-the-co-simulation" title="Permalink to this headline">Â¶</a></h2>
<p>To run a co-simulation, the dml file (such as the one above) must be placed in a
directory containing a makefile such as the one linked
<a class="reference external" href="https://github.com/Vignesh2208/VT-S3FNet/tree/master/base/s3fnet/test/lxc_tests/small_2_tcp_large_pings/Makefile/">here</a>.</p>
<p>Please follow this template to define makefiles for other co-simulations as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before running a co-simulation, make sure that the corresponding virtual time manager (Titan or Kronos) is loaded.</p>
</div>
<p>To run a co-simulation, use the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">co</span><span class="o">-</span><span class="n">simulated</span><span class="o">-</span><span class="n">mode</span><span class="o">-</span><span class="n">definition</span><span class="o">-</span><span class="n">directory</span><span class="o">&gt;</span>
<span class="n">make</span> <span class="n">clean</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">test</span>
</pre></div>
</div>
<p>For instance to run this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">VT</span><span class="o">-</span><span class="n">S3FNet</span><span class="o">/</span><span class="n">base</span><span class="o">/</span><span class="n">s3fnet</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">lxc_tests</span><span class="o">/</span><span class="n">small_2_tcp_large_pings</span>
<span class="n">make</span> <span class="n">clean</span>
<span class="n">make</span>
<span class="n">make</span> <span class="n">test</span>
</pre></div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">User Guide</a><ul>
<li><a class="reference internal" href="#emulated-host-definitions">Emulated host definitions</a></li>
<li><a class="reference internal" href="#defining-a-simulated-network">Defining a simulated network</a></li>
<li><a class="reference internal" href="#running-the-co-simulation">Running the co-simulation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="advanced_examples.html"
                        title="next chapter">Advanced Examples</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/user_guide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="advanced_examples.html" title="Advanced Examples"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">VT-S3FNet 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">User Guide</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, project_moses.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.1.
    </div>
  </body>
</html>